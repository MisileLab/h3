---
import dayjs from "dayjs"
import Base from "../components/base.astro"

export interface Props {
  title: string
  description: string
  date: number
  isnews: boolean
  rewind?: boolean
}
const {title, description, date, isnews, rewind = true} = Astro.props;
if (import.meta.env.PROD && date === 0) {throw Error("It is just draft.")}
---

<Base rewind={rewind} title={title} description={description} ogType="article">
  <div class="content-container my-8 md:my-12">
    <div class="flex flex-col border-b border-indigo-500/30 pb-8 mb-8">
      <h1 class="text-4xl md:text-5xl font-bold text-indigo-50 mb-4">{title}</h1>
      <p class="text-indigo-300 text-xl md:text-2xl mb-2">{description}</p>
      <div class="flex flex-wrap gap-4 text-indigo-400 text-lg">
        <p>{dayjs.unix(date).toString().replace('GMT', 'UTC')}</p>
        {isnews && <span class="text-indigo-500">|</span>}
        {isnews && <p>Summarized with gpt4o-mini</p>}
      </div>
    </div>
    <div class="prose prose-invert prose-indigo max-w-none text-indigo-100/90 leading-relaxed">
      <slot />
    </div>
  </div>
  <style is:global>
    @reference "tailwindcss/theme";

    /* Typography refinements */
    h1, h2, h3, h4, h5, h6 {
      @apply text-indigo-100 font-semibold mt-8 mb-4;
    }
    
    h1 { @apply text-3xl md:text-4xl; }
    h2 { @apply text-2xl md:text-3xl border-b border-indigo-500/20 pb-2; }
    h3 { @apply text-xl md:text-2xl; }
    
    p {
      @apply mb-4 text-lg md:text-xl leading-8;
    }

    a {
      @apply text-indigo-400 hover:text-indigo-300 hover:underline underline-offset-4 decoration-indigo-500/30;
    }

    ul {
      @apply list-disc pl-6 mb-6 space-y-2 marker:text-indigo-500;
    }
    ol {
      @apply list-decimal pl-6 mb-6 space-y-2 marker:text-indigo-500;
    }
    
    li {
      @apply text-lg md:text-xl pl-2;
    }

    blockquote {
      @apply border-l-4 pl-6 py-1 my-6 border-indigo-500/50 bg-indigo-950/30 italic text-indigo-200 rounded-r-lg;
    }

    code {
      @apply bg-indigo-900/50 text-indigo-200 px-1.5 py-0.5 rounded text-base md:text-lg font-mono border border-indigo-500/20;
    }
    
    pre {
      @apply bg-gray-900/80 p-4 rounded-lg border border-indigo-500/20 overflow-x-auto my-6;
    }
    
    pre code {
      @apply bg-transparent border-0 text-indigo-100 p-0 text-sm md:text-base;
    }
    
    strong {
      @apply text-indigo-50 font-bold;
    }
    
    img {
      @apply rounded-lg border border-indigo-500/20 my-8 shadow-lg shadow-indigo-500/5;
    }
  </style>
</Base>
