# RISC-V 백엔드 최적화 - Box64

- 최근 Box64의 발전은 RISC-V 플랫폼의 성능 개선에 중점을 두고 있습니다.
- RISC-V는 이제 x86 및 AArch64와 유사한 SIMD(단일 명령어, 다중 데이터) 명령어를 지원하게 되었습니다.
- 이전의 에뮬레이션은 스칼라 명령어를 사용하여 성능 저하를 초래했습니다.
- 최근 업데이트는 벡터 확장(RVV) 및 XTheadVector에 대한 초기 지원을 추가하여 SIMD 기능을 향상시켰습니다.

## SIMD 지원 향상

- **에뮬레이션 비교**:
  - 초기 RISC-V 에뮬레이션은 x86의 SIMD 명령어를 스칼라 명령어로 번역하여 명령어 수가 크게 증가했습니다.
  - 새로운 구현은 번역 효율을 개선하여 성능을 유지하면서 명령어 수를 줄입니다.

- **벤치마크**:
  - dav1d AV1 디코딩 테스트 결과:
    - XTheadVector 사용 시: 151.43 fps
    - XTheadVector 미사용 시: 39.44 fps
    - 이는 새로운 SIMD 지원으로 인해 성능이 거의 4배 향상되었음을 보여줍니다.

## 명령어 세트 다양성

- RISC-V의 다양한 명령어 세트는 제조업체가 확장을 가변적으로 구현할 수 있는 자유로 인해 도전 과제가 됩니다.
- 이 가변성은 하드웨어 지원이 없는 경우 대체 구현이 필요하게 만듭니다.

## 미래 방향

- 향후 개선 사항은 더 많은 x86 SIMD 명령어를 통합하여 호환성과 성능을 높일 계획입니다.
- AArch64와 유사한 강력한 DynaRec 개발에 중점을 두어, 게임 성능 향상을 기대하고 있습니다.