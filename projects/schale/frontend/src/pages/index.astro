---
import Base from "../components/base.astro"
import NeuralNetwork from "../components/neural-network.astro"

---

<Base>
  <Fragment slot="head">
    <title>Misile</title>
    <script>
      import { queryId } from "@misile/satellite"

      queryId("crypto").addEventListener("click", ()=>{
        navigator.clipboard.writeText("42VhRaWNzVxH3xzREovoarcAzJ4AFYFj26DK6nG8Hx3vB5ZzVWcZw2KEX4oWTyQStb7jz2sH8Gfzh9861SQb2gV4R4unT45")
        alert("Copied!")
      })

      // Initialize neural network with completion callback
      document.addEventListener('DOMContentLoaded', () => {
        const showMainContent = () => {
          const mainContent = document.getElementById('main-content');
          if (mainContent) {
            mainContent.classList.remove('opacity-0');
            mainContent.classList.add('opacity-100');
          }
        };
        
        // Check if NeuralNetworkVisualizer is available and initialize
        const initNeuralNetwork = () => {
          if ((window as any).NeuralNetworkVisualizer) {
            new (window as any).NeuralNetworkVisualizer(showMainContent);
          } else {
            // Retry after a short delay if not yet available
            setTimeout(initNeuralNetwork, 100);
          }
        };
        
        initNeuralNetwork();
      });
    </script>
  </Fragment>
	<div class="w-full min-h-screen flex flex-col justify-center items-center p-4">
    <!-- Neural Network Section -->
    <div class="flex justify-center items-center mb-6 sm:mb-12 w-full">
      <NeuralNetwork />
    </div>
    
    <!-- Original Content Section - Hidden initially -->
    <div id="main-content" class="flex justify-center items-center opacity-0 transition-opacity duration-1000 w-full">
      <div class="flex flex-col items-center text-center max-w-4xl">
        <p class="text-3xl sm:text-4xl lg:text-6xl font-bold mb-4 sm:mb-6">Misile</p>
        <div class="flex flex-wrap justify-center items-center text-base sm:text-xl lg:text-3xl font-normal text-indigo-200 gap-1 sm:gap-2 mb-3 sm:mb-4">
          <a href="/projects" class="hover:text-white transition-colors">Projects</a>
          <span class="text-indigo-300">|</span>
          <a href="/en/blog" class="hover:text-white transition-colors">Blog</a>
          <span class="text-indigo-300">|</span>
          <a href="/contact" class="hover:text-white transition-colors">Contact</a>
          <span class="text-indigo-300">|</span>
          <a href="https://mail.misile.xyz" class="hover:text-white transition-colors">Subscribe</a>
        </div>
        <div class="flex flex-wrap justify-center items-center text-xs sm:text-base lg:text-xl text-indigo-200 cursor-pointer gap-1 sm:gap-2" id="crypto">
          <span>Donate</span>
          <p class="bg-gray-950 text-indigo-300 px-2 py-1 rounded">XMR</p>
          <span class="text-xs sm:text-sm">(Click to Copy)</span>
        </div>
      </div>
    </div>
	</div>
</Base>
