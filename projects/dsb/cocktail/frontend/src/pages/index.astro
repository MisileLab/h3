---
const ONION_URL = ""
const PW = "test"
const name = "test"
---

<html lang="en">
	<head>
		<script type="module">
			const socket = new ws.Server(`ws://${ONION_URL}/chat/${PW}`)
			
			socket.addEventListener('open', (e)=>{
				socket.send(`{"msg": "${name} joined", "name": ${name}}`)
			})
			
			socket.addEventListener("message", (e)=>{
				document.getElementById("messages").innerHTML += `<p>${name}</p>`
			})
			</script>
		<meta charset="utf-8" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="viewport" content="width=device-width" />
		<meta name="generator" content={Astro.generator} />
		<title>{`cocktail ${(async ()=>{
			const r = await fetch(`http://${ONION_URL}`);
			return r.text;
		})()}`}</title>
	</head>
	<body>
		<div style="flex-direction: column; display: flex; align-items: center;" class="msgs">
			<h1>Cocktail</h1>
		</div>
	</body>
</html>
