function L(r,t){if("captureStackTrace"in Error)Error.captureStackTrace(r,t);else{const e=new Error().stack;r.stack=e||""}}class u extends Error{constructor(){super("nullValue"),L(this,u)}}class T extends Error{constructor(){super("NaNValue"),L(this,T)}}function l(r){if(r==null||r==null)throw new u;return r}function f(r){const t=Number.parseInt(r);if(isNaN(t))throw T;return t}function c(r,t,e){if(t<0||t>=r.length)throw new Error("Index out of bounds");const i=r.slice(0,t),n=r.slice(t+1);return i+e+n}function w(r,t,e=1){const i=[];if(e===0)throw new Error("Step cannot be zero.");if(e>0)for(let n=r;n<t;n+=e)i.push(n);else for(let n=r;n>t;n+=e)i.push(n);return i}class p extends HTMLElement{initialTime=f(l(this.dataset.initialtime))*1e3;hover=l(this.dataset.hover);completeTime=f(l(this.dataset.completetime))*1e3;animationType=l(this.dataset.animationtype);animations={};getLength(t){return Object.keys(t).length}randomHide(t,e,i,n){const h=t.innerText.length,o=w(0,h);for(let s=0;s<h;s++)this.animations[e].hide[s]=setTimeout(()=>{const a=Math.floor(Math.random()*o.length),m=o[a];o.splice(a,1),t.innerText=c(t.innerText,m,"_"),delete this.animations[e].hide[s]},n+i*s)}normalHide(t,e,i,n,d){const h=t.innerText.length-1;for(let o=0;o<t.innerText.length;o++)this.animations[e].hide[o]=setTimeout(()=>{console.debug("start"),t.innerText=c(t.innerText,i?h-o:o,"_"),delete this.animations[e].hide[o]},d+n*o)}randomShow(t,e,i,n,d){const o=t.innerText.length,s=w(0,o);for(let a=0;a<o;a++)this.animations[e].show[a]=setTimeout(()=>{console.log(`length: ${s}`);const m=Math.floor(Math.random()*s.length),g=s[m];s.splice(m,1),t.innerText=c(t.innerText,g,i[g]),delete this.animations[e].show[a]},d+n*a)}normalShow(t,e,i,n,d,h){const o=t.innerText.length-1;for(let s=0;s<t.innerText.length;s++)this.animations[e].show[s]=setTimeout(()=>{console.debug("end"),t.innerText=c(t.innerText,n?o-s:s,i[n?o-s:s]),delete this.animations[e].show[s]},h+d*s)}connectedCallback(){for(let t=0;t<this.childNodes.length;t++){const e=this.childNodes[t],i=e.innerText,n=this.completeTime/e.innerText.length;this.animations[t]={show:[],hide:[]},this.hover=="reanimate"?this.animationType=="normal"||this.animationType=="rewind"?(e.addEventListener("mouseover",()=>{this.getLength(this.animations[t].show)>0||this.getLength(this.animations[t].hide)>0||(this.normalHide(e,t,this.animationType=="rewind",n/2,0),this.normalShow(e,t,i,this.animationType=="rewind",n/2,n*(e.innerText.length/2)))}),document.addEventListener("DOMContentLoaded",()=>{this.normalHide(e,t,this.animationType=="rewind",n/2,this.initialTime),this.normalShow(e,t,i,this.animationType=="rewind",n/2,this.initialTime+n*(e.innerText.length/2))})):(e.addEventListener("mouseover",()=>{this.getLength(this.animations[t].show)>0||this.getLength(this.animations[t].hide)>0||(this.randomHide(e,t,n/2,0),this.randomShow(e,t,i,n/2,n*(e.innerText.length/2)))}),document.addEventListener("DOMContentLoaded",()=>{this.randomHide(e,t,n/2,this.initialTime),this.randomShow(e,t,i,n/2,this.initialTime+n*(e.innerText.length/2))})):this.hover=="hide"?this.animationType=="normal"||this.animationType=="rewind"?(e.addEventListener("mouseover",()=>{this.getLength(this.animations[t].hide)>0||this.normalHide(e,t,this.animationType=="rewind",n,0)}),e.addEventListener("mouseout",()=>{this.getLength(this.animations[t].show)>0||this.normalShow(e,t,i,this.animationType=="rewind",n,0)})):(e.addEventListener("mouseover",()=>{this.getLength(this.animations[t].hide)>0||this.randomHide(e,t,n,0)}),e.addEventListener("mouseout",()=>{this.getLength(this.animations[t].show)>0||this.randomShow(e,t,i,n,0)})):this.hover=="show"&&(this.animationType=="normal"||this.animationType=="rewind"?(e.addEventListener("mouseover",()=>{this.getLength(this.animations[t].show)>0||this.normalShow(e,t,i,this.animationType=="rewind",n,0)}),document.addEventListener("DOMContentLoaded",()=>{this.normalHide(e,t,this.animationType=="rewind",n,this.initialTime)}),e.addEventListener("mouseout",()=>{this.getLength(this.animations[t].hide)>0||this.normalHide(e,t,this.animationType=="rewind",n,0)})):(e.addEventListener("mouseover",()=>{this.getLength(this.animations[t].show)>0||this.randomShow(e,t,i,n,0)}),document.addEventListener("DOMContentLoaded",()=>{this.randomHide(e,t,n,this.initialTime)}),e.addEventListener("mouseout",()=>{this.getLength(this.animations[t].hide)>0||this.randomHide(e,t,n,0)})))}}}customElements.define("astro-animation",p);
